(function r(e,n,t){function i(u,s){if(!n[u]){if(!e[u]){var a=typeof require=="function"&&require;if(!s&&a)return a(u,!0);if(l)return l(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var o=n[u]={exports:{}};e[u][0].call(o.exports,function(r){var n=e[u][1][r];return i(n?n:r)},o,o.exports,r,e,n,t)}return n[u].exports}var l=typeof require=="function"&&require;for(var u=0;u<t.length;u++)i(t[u]);return i})({1:[function(r,e,n){(function(){e.exports=r("./lib/jinqjs.js");e.exports.webservicePlugin=r("./plugins/browser/webservice-plugin.js")})()},{"./lib/jinqjs.js":2,"./plugins/browser/webservice-plugin.js":4}],2:[function(r,e,n){(function(){var n=function(e){var t=[],i=[],l=[],u=false,s=false,a=null,f=false,o={LessThen:0,LessThenEqual:1,GreaterThen:2,GreaterThenEqual:3,Equal:4,EqualEqualType:5,NotEqual:6,NotEqualEqualType:7,Contains:8},h={};var c=r("./utils.js");n.settings=n.settings||{};if(typeof e!=="undefined"){n.settings=e}n.settings.includeIdentity=n.settings.includeIdentity||false;n.settings.identityName=n.settings.identityName||"ID";var v=function(r,e,n){for(var t=0;t<r.length;t++){if(r[t][e]===n){return true}}return false},g=function(r,e,n){var t=null;var i=false;var l=[];var u=false;n=n||false;for(var s=0;s<r.length;s++){i=false;for(var a in e){t=r[s];u=c.isObject(t);if(!u&&t!==e[a]||u&&t[a]!==e[a]){i=false;break}i=true}if(i){if(n){return t}else{l.push(t)}}}return l.length===0?null:l},p=function(r,e){return g(r,e,true)},d=function(r,e){var n={};var t=null;for(var i=0;i<e.length;i++){t=e[i];if(c.hasProperty(r,t)){n[t]=r[t]}else{n[t]=0}}return n},y=function(r,e){var n=[];var t=null;var u=null;var s=null;for(var a=0;a<i.length;a++){t=d(i[a],l);u=d(i[a],r);s=p(n,t);if(s===null){s={};for(var f in t){s[f]=t[f]}for(var o in u){s[o]=e(s[o],u[o],JSON.stringify(t)+o)}n.push(s)}else{for(var h in u){s[h]=e(s[h],i[a][h],JSON.stringify(t)+h)}}}l=[];return n},b=function(r){var e=null;var n=null;var t=null;var l=null;var u=null;var s=null;var a=null;var f=1;var o=false;for(var h=0;h<r.length;h++){n=h>0?r[h-1]:null;e=r[h];t=c.hasProperty(e,"field")?e.field:null;f=c.hasProperty(e,"sort")&&e.sort==="desc"?-1:1;o=t!==null&&!isNaN(t)?true:false;i.sort(function(r,e){var i=false;var h=false;var v=null;var g=null;if(o){l=Object.keys(r)[t];u=Object.keys(e)[t];if(n!==null){s=Object.keys(r)[n.field];a=Object.keys(e)[n.field]}}else{l=u=t;if(n!==null){s=a=n.field}}v=t===null?r:isNaN(r[l])||r[l]===""?r[l]:Number(r[l]);g=t===null?e:isNaN(e[u])||e[u]===""?e[u]:Number(e[u]);if(c.isString(v)&&c.isString(g)){var p=v.localeCompare(g);switch(p){case-1:i=true;break;case 1:h=true;break}}else{i=v<g;h=v>g}if(i&&(n===null||(t===null||r[s]===e[a]))){return-1*f}if(h&&(n===null||(t===null||r[s]===e[a]))){return 1*f}return 0})}},w=function(r){switch(r.length){case 1:return r[0].concat();case 2:return[].concat(r[0],r[1]);case 3:return[].concat(r[0],r[1],r[2]);case 4:return[].concat(r[0],r[1],r[2],r[3]);case 5:return[].concat(r[0],r[1],r[2],r[3],r[4]);default:var e=[];for(var n=0;n<r.length;n++){e=e.concat(r[n])}return e}},E=function(r){var e={};for(var n=0;n<r.length;n++){for(var t in r[n]){e[t]=r[n][t]}}return e},m=function(r){var e={};for(var n in r){e[n]=""}return e},N=function(r){switch(r){case"<":return o.LessThen;case">":return o.GreaterThen;case"!=":return o.NotEqual;case"!==":return o.NotEqualEqualType;case"=":case"==":return o.Equal;case"===":return o.EqualEqualType;case"<=":return o.LessThenEqual;case">=":return o.GreaterThenEqual;case"*":return o.Contains;default:throw new Error("Invalid Operator! ("+r+")")}},q=function(r){var e=[];for(var n in r){e.push({field:n})}return e},O=function(r,e){var l=null;var u=[];var s=null;var a=[];var f=1;switch(r){case"from":if(t.length===1){i=t[0];return}a=t[0];break;case"full":case"inner":case"left":a=i;f=0;break;default:return}for(var o=f;o<t.length;o++){u=[];a.forEach(function(n){if(c.isFunction(e[0])){s=[];t[o].forEach(function(r){if(e[0](n,r)){s.push(r)}});if(s.length===0){s=null}}else{l=d(n,e);s=g(t[o],l)}if(s!==null){if(c.isString(s[0])){u.push(n)}else{s.forEach(function(r){u.push(E([r,n]))})}}else{if(r==="left"||r==="full"){if(t[o].length>0){l=m(t[o][0]);l=E([l,n])}u.push(E([n,l]))}}});if(r==="full"){var h=(new n).from(t[o]).not().in(u,e).select(q(u[0]));u=u.concat(h)}a=u}t=[];i=u},j=function(r){return r!==null&&((c.isArray(r)||c.isString(r))&&r.length>0||c.isObject(r)&&!c.isFunction(r))},x=function(r,e){if(e.length===0){return}t=[];t.func=r;for(var n=0;n<e.length;n++){if(j(e[n])){t.push(e[n])}}},F=function(r){var e=/([^\s]+)\s(<|>|!=|!==|=|==|===|<=|>=|\*)\s(.+)/;var n=r.length;var t=new Array(n);for(var i=0;i<n;i++){var l=r[i].match(e);if(l===null){throw new Error("Invalid expression - must have four parts! ("+r[i]+")")}t[i]={lField:l[1],operator:N(l[2]),rValue:l[3]}}return t},T=function(r,e){switch(e.operator){case o.EqualEqualType:return r[e.lField]===e.rValue;case o.NotEqualEqualType:return r[e.lField]!==e.rValue;case o.LessThen:return r[e.lField]<e.rValue;case o.GreaterThen:return r[e.lField]>e.rValue;case o.NotEqual:return r[e.lField]!=e.rValue;case o.Equal:return r[e.lField]==e.rValue;case o.LessThenEqual:return r[e.lField]<=e.rValue;case o.GreaterThenEqual:return r[e.lField]>=e.rValue;case o.Contains:return r[e.lField].indexOf(e.rValue)>-1;default:return false}};var S=function(){t.func="from";i=w(t);return this},A=function(){var r=null;var e=null;var n=t.length;i=[];if(arguments.length===0){return this}if(arguments.length===2&&c.isFunction(arguments[1])){r=arguments[0];e=arguments[1];if(c.isString(r)){throw new Error("Web service calls no longer directly supported. "+"Use the fromWebService plugin for this type of call.")}t.push(r)}else{for(var l=0;l<arguments.length;l++){if(j(arguments[l])){t.push(arguments[l])}}}if(t.length>n){S()}return c.isFunction(e)?e(this):this},k=function(){var r=null;var e=false;var t=false;var l=null;var u=null;var a=null;var f=null;var o=null;var h=false;if(c.isEmpty(i)){return[]}if(n.settings.includeIdentity&&!s){R()}if(c.isEmpty(arguments)){return i}h=!c.isObject(i[0]);u=new Array(i.length);if(c.isArray(arguments[0])){e=true;r=arguments[0];l=new Array(r.length);for(var v=0;v<r.length;v++){l[v]={hasField:c.hasProperty(r[v],"field"),hasText:c.hasProperty(r[v],"text"),hasValue:c.hasProperty(r[v],"value")}}}else if(c.isFunction(arguments[0])){t=true;r=arguments[0]}else{r=arguments}for(var g=0;g<i.length;g++){if(t){u[g]=r(i[g],g)}else{a={};for(var p=0;p<r.length;p++){if(e){if(l[p].hasField){if(!c.isNumber(r[p].field)){f=r[p].field}else{f=Object.keys(i[g])[r[p].field]}}o=l[p].hasText?r[p].text:r[p].field}else{o=f=r[p]}if(e&&l[p].hasValue){if(c.isFunction(r[p].value)){a[o]=r[p].value(i[g])}else{a[o]=r[p].value}}else{a[o]=h?i[g]:i[g][f]===0?0:i[g][f]||null}}u[g]=a}}return u},P=function(r){if(f){throw new Error("A pending delete operation exists!")}if(a!==null){throw new Error("A pending update operation exists!")}if(!c.isFunction(r)){throw new Error("You must define a predicate for update()")}a=r;return this},V=function(){if(a!==null){throw new Error("A pending update operation exists!")}if(f){throw new Error("A pending delete operation exists!")}f=true;return this},J=function(){var r=i.length;var e=null;var n=false;var l=null;var u=false;var s=arguments.length;if(a===null&&!f||r===0){return this}if(f&&s===0){i=[];t=[];a=null;f=false;return this}if(s>0){n=c.isFunction(arguments[0]);if(!n){e=F(arguments)}else{l=arguments[0]}}for(var o=r-1;o>-1;o--){if(n){if(l(i,o)){if(f){i.splice(o,1)}else{a(i,o)}}}else if(s===0&&!f){a(i,o)}else{for(var h=0;h<s;h++){u=T(i[o],e[h]);if(!u){break}}if(u){if(f){i.splice(o,1)}else{a(i,o)}}}}a=null;f=false;return this},I=function(){t.func=null;for(var r=0;r<arguments.length;r++){i=i.concat(arguments[r])}return this},L=function(r){var e=0;if(r>-1&&r<1){e=i.length*r}else{e=r}if(r<0){i=i.slice(e,i.length-Math.abs(e)*-1)}else{i=i.slice(0,e)}return this},G=function(r){L(r*-1);return this},C=function(r){var e=[];var n=false;var t=false;var l=arguments.length;var u=i.length;var s=null;var a=null;if(typeof r==="undefined"){return this}n=c.isFunction(r);if(!n){s=F(arguments)}for(var f=0;f<u;f++){a=i[f];if(n){if(r(a,f)){e.push(a)}}else{for(var o=0;o<l;o++){t=T(a,s[o]);if(!t){break}}if(t){e.push(a)}}}i=e;return this},D=function(){var r=[];var e=null;var n=null;var t=0;var l=i.length;var u=0;var s=false;if(arguments.length===0){if(c.isObject(i[0])){for(t=0;t<l;t++){s=false;for(var a=0;a<u;a++){if(i[t]!==r[a]){continue}s=true;break}if(!s){r[u++]=i[t]}}}else{var f={};for(t=0;t!==l;t++){e=i[t];if(f[e]!==1){f[e]=1;r[r.length]=e}}}}else{var o=arguments;if(Array.isArray(arguments[0])){o=arguments[0]}for(t=0;t<l;t++){e=d(i[t],o);for(var h=0;h<o.length;h++){n=o[h];if(!v(r,n,e[n])){r.push(e);break}}}}i=r;return this},_=function(){l=arguments;return this},M=function(){var r={};if(l.length===0){r=0;for(var e=0;e<i.length;e++){r+=arguments.length===0?i[e]:i[e][arguments[0]]}i=[r]}else{i=y(arguments,function(e,n,t){var i=t;if(!c.hasProperty(r,i)){r[i]=0}return r[i]+=n})}return this},U=function(){var r={};if(l.length===0){r=0;for(var e=0;e<i.length;e++){r+=arguments.length===0?i[e]:i[e][arguments[0]]}i=[r/i.length]}else{i=y(arguments,function(e,n,t){var i=JSON.stringify(t);if(!c.hasProperty(r,i)){r[i]={count:0,sum:0}}r[i].count++;r[i].sum+=n;return r[i].sum/r[i].count})}return this},W=function(){var r={};i=y(arguments,function(e,n,t){var i=JSON.stringify(t);if(!c.hasProperty(r,i)){r[i]=0}return++r[i]});return this},B=function(){var r={};var e=0;if(l.length===0){r=-1;for(var n=0;n<i.length;n++){e=arguments.length===0?Number(i[n]):Number(i[n][arguments[0]]);r=e<r||r===-1?e:r}i=[r]}else{i=y(arguments,function(e,n,t){var i=JSON.stringify(t);if(!c.hasProperty(r,i)||n<r[i]){r[i]=n}return r[i]})}return this},H=function(){var r={};var e=0;if(l.length===0){r=-1;for(var n=0;n<i.length;n++){e=arguments.length===0?Number(i[n]):Number(i[n][arguments[0]]);r=e>r||r===-1?e:r}i=[r]}else{i=y(arguments,function(e,n,t){var i=JSON.stringify(t);if(!c.hasProperty(r,i)||n>r[i]){r[i]=n}return r[i]})}return this},R=function(){var r=1;var e=i.length>0&&!c.isObject(i[0]);var t=[];var l=null;var u=arguments.length===0?n.settings.identityName:arguments[0];s=true;for(var a=0;a<i.length;a++){if(e){l={};l[u]=r++;l.Value=i[a];t.push(l)}else{i[a][u]=r++}}if(e){i=t}return this},X=function(){var r=arguments;if(arguments.length>0&&c.isArray(arguments[0])){b(arguments[0]);return this}i.sort(function(e,n){var t=JSON.stringify(d(e,r));var i=JSON.stringify(d(n,r));return t.localeCompare(i)});return this},Y=function(){if(arguments.length===0||!c.isArray(arguments[0])||arguments[0].length===0){return this}if(!c.isObject(arguments[0][0])){for(var r=0;r<arguments.length;r++){I(arguments[r])}D()}else{var e=w(arguments);I(e);l=[];for(var n in arguments[0][0]){l.push(n)}W()}return this},z=function(){if(arguments.length===0||!c.hasProperty(t,"func")){return this}O(t.func,arguments);t.func=null;return this},K=function(){var r=[];var e=null;var n=null;var t=false;var l=[];var s=null;if(arguments.length===0){return this}s=arguments[0];if(s.length===0||i.length===0){return this}var a=!c.isObject(s[0]);var f=!c.isObject(i[0]);if((!a||!f)&&arguments.length<2){throw new Error("Invalid field or missing field!")}if(arguments.length<2){l=[0]}else{if(c.isArray(arguments[1])){l=arguments[1]}else{for(var o=1;o<arguments.length;o++){l.push(arguments[o])}}}var h=0;for(var v=0;v<i.length;v++){for(var g=0;g<s.length;g++){h=0;for(var p=0;p<l.length;p++){e=f?i[v]:i[v][l[p]];n=a?s[g]:s[g][l[p]];t=e===n;if(t){h++}}if(h===l.length){break}}if(g<s.length&&!u||g===s.length&&u){r.push(i[v])}}u=false;i=r;return this},Q=function(){x("inner",arguments);return this},Z=function(){x("left",arguments);return this},$=function(){x("full",arguments);return this},rr=function(){u=true;return this},er=function(){var r=0;if(arguments.length===0||!c.isNumber(arguments[0])){return this}var e=arguments[0];if(e>-1&&arguments[0]<1){r=i.length*e}else{r=e}i=i.slice(r);return this};this.flattenFromData=S;this.from=A;this.select=k;this.update=P;this.top=L;this.bottom=G;this.where=C;this.distinct=D;this.groupBy=_;this.sum=M;this.count=W;this.min=B;this.max=H;this.avg=U;this.identity=R;this.orderBy=X;this.on=z;this.join=Q;this.leftJoin=Z;this.fullJoin=$;this.concat=I;this.union=Y;this.not=rr;this.in=K;this.skip=er;this.filter=C;this.at=J;this.delete=V;this._x=function(r,e,n,l){h[r]=h[r]||{};switch(l){case"select":return n.call(this,i,e,h[r]);case"from":return n.call(this,t,e,h[r]);default:throw new Error("Illegal plugin type ("+l+")")}}};n.addPlugin=function(r,e,t){t=t||"select";n.prototype[r]=function(){return this._x(r,arguments,e,t)}};e.exports=n})()},{"./utils.js":3}],3:[function(r,e,n){(function(){var r=function(r){return typeof r==="undefined"||r.length===0},n=function(r){var e=typeof r;return r!==null&&(e==="object"||e==="function")},t=function(r){return r!==null&&r.constructor===String},i=function(r,e){return r[e]!==undefined},l=function(r){return typeof r==="function"},u=function(r){return typeof r==="number"},s=function(r){return!t(r)&&i(r,"length")&&!l(r)};e.exports.isEmpty=r;e.exports.isObject=n;e.exports.isString=t;e.exports.hasProperty=i;e.exports.isFunction=l;e.exports.isNumber=u;e.exports.isArray=s})()},{}],4:[function(r,e,n){(function(){var n=function(){this.from=function(e,n,t){var i=r("../../lib/utils.js");var l=new XMLHttpRequest;var u=null;var s=null;var a=this;if(n.length===0){return this}if(n.length!==2||!i.isString(n[0])){throw new Error("The WebServicePlugin requires two arguments")}u=n[0];s=n[1];var f=null;if(i.isFunction(s)){l.onreadystatechange=function(){if(l.response.length===0){return}f=JSON.parse(l.response);if(!i.isArray(f)){f=new Array(f)}e.push(f);s(a)}}l.open("GET",u,i.isFunction(s));l.send();if(!i.isFunction(s)){f=JSON.parse(l.response);if(!i.isArray(f)){f=new Array(f)}e.push(f)}return this}};e.exports=n})()},{"../../lib/utils.js":3}]},{},[1]);